{% extends "app/main.html" %} {% block content %}

<style>
  .product {
    display: flex;
    justify-content: center;
    padding: 20px 10px;
    border: 1px dashed lightgreen;
  }

  .checkout-form {
    display: flex;
    justify-content: center;
    padding: 20px 10px;
  }

  .viewport-height {
    min-height: 70vh;
    overflow-y: auto;
  }
</style>

<header>
  <p>Logged in as {{ request.user.email }}</p>
</header>

<section>
  <!--        Show product details-->
  <div class="product">
    <div class="description">
      <h3>Friendi Premium</h3>
      <h5>$2.35 / month</h5>
    </div>
  </div>

  <!--        Go to checkout button -->
  <form class="checkout-form" action="{%  url 'create-checkout-session' %}" method="POST">
    {% csrf_token %}

    <!-- Add a hidden field with the lookup_key of your stripe Price -->
    <input type="hidden" name="price_lookup_key" value="premium_monthly" />
    <button id="checkout-and-portal-button" type="submit">Checkout</button>
  </form>
</section>

<script src="https://js.stripe.com/v3/"></script>

{% endblock %}